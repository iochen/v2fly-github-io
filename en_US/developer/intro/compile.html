<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The first step: learn to compile | V2Fly.org</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="apple-touch-icon" size="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" size="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" size="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" color="#5bbad5" href="/safari-pinned-tab.svg">
    <meta name="description" content="Project V is a collection of tools that can help you build your own basic communication network">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="apple-mobile-web-app-title" content="Project V">
    <meta name="application-name" content="Project V">
    <meta name="msapplication-TileColor" content="#da532c">
    
    <link rel="preload" href="/assets/css/0.styles.f2335d27.css" as="style"><link rel="preload" href="/assets/js/app.f124a845.js" as="script"><link rel="preload" href="/assets/js/3.1f5d93f1.js" as="script"><link rel="preload" href="/assets/js/6.3810ea31.js" as="script"><link rel="preload" href="/assets/js/57.3916c424.js" as="script"><link rel="prefetch" href="/assets/js/10.d67ee3c1.js"><link rel="prefetch" href="/assets/js/11.a0dfae79.js"><link rel="prefetch" href="/assets/js/12.fdf1eb26.js"><link rel="prefetch" href="/assets/js/13.a088bca5.js"><link rel="prefetch" href="/assets/js/14.4acaeb14.js"><link rel="prefetch" href="/assets/js/15.1639a62b.js"><link rel="prefetch" href="/assets/js/16.00fdf35b.js"><link rel="prefetch" href="/assets/js/17.61d6076b.js"><link rel="prefetch" href="/assets/js/18.4a4d66cc.js"><link rel="prefetch" href="/assets/js/19.05e2494d.js"><link rel="prefetch" href="/assets/js/20.89d7cfaf.js"><link rel="prefetch" href="/assets/js/21.045c034c.js"><link rel="prefetch" href="/assets/js/22.ef8b0722.js"><link rel="prefetch" href="/assets/js/23.4a395c56.js"><link rel="prefetch" href="/assets/js/24.f27b120a.js"><link rel="prefetch" href="/assets/js/25.7c331a5e.js"><link rel="prefetch" href="/assets/js/26.fbf25890.js"><link rel="prefetch" href="/assets/js/27.be905657.js"><link rel="prefetch" href="/assets/js/28.95be0f08.js"><link rel="prefetch" href="/assets/js/29.45158f52.js"><link rel="prefetch" href="/assets/js/30.ed87ac06.js"><link rel="prefetch" href="/assets/js/31.5e5fa628.js"><link rel="prefetch" href="/assets/js/32.de6a2bd1.js"><link rel="prefetch" href="/assets/js/33.a47b0f6d.js"><link rel="prefetch" href="/assets/js/34.f8212463.js"><link rel="prefetch" href="/assets/js/35.a3ec39f1.js"><link rel="prefetch" href="/assets/js/36.eed7aa28.js"><link rel="prefetch" href="/assets/js/37.88ba9e42.js"><link rel="prefetch" href="/assets/js/38.c5f59d2d.js"><link rel="prefetch" href="/assets/js/39.f9b62be2.js"><link rel="prefetch" href="/assets/js/4.2e709f8d.js"><link rel="prefetch" href="/assets/js/40.19e02031.js"><link rel="prefetch" href="/assets/js/41.65300dc3.js"><link rel="prefetch" href="/assets/js/42.7f31a067.js"><link rel="prefetch" href="/assets/js/43.06e57b0c.js"><link rel="prefetch" href="/assets/js/44.e71cc2f2.js"><link rel="prefetch" href="/assets/js/45.4e5cc7be.js"><link rel="prefetch" href="/assets/js/46.13ba1bcd.js"><link rel="prefetch" href="/assets/js/47.a2d49d74.js"><link rel="prefetch" href="/assets/js/48.027bd952.js"><link rel="prefetch" href="/assets/js/49.488f60a4.js"><link rel="prefetch" href="/assets/js/5.efeee895.js"><link rel="prefetch" href="/assets/js/50.e6084fbb.js"><link rel="prefetch" href="/assets/js/51.18bd3220.js"><link rel="prefetch" href="/assets/js/52.82035282.js"><link rel="prefetch" href="/assets/js/53.ca6c6ed7.js"><link rel="prefetch" href="/assets/js/54.993b0c29.js"><link rel="prefetch" href="/assets/js/55.4d260c7d.js"><link rel="prefetch" href="/assets/js/56.a4c7a19a.js"><link rel="prefetch" href="/assets/js/58.1e8d12ac.js"><link rel="prefetch" href="/assets/js/59.fadc1ca9.js"><link rel="prefetch" href="/assets/js/60.b11dcce8.js"><link rel="prefetch" href="/assets/js/61.e00dfe6c.js"><link rel="prefetch" href="/assets/js/62.a8a59b10.js"><link rel="prefetch" href="/assets/js/63.03f89e56.js"><link rel="prefetch" href="/assets/js/64.351afb38.js"><link rel="prefetch" href="/assets/js/65.9c9a7154.js"><link rel="prefetch" href="/assets/js/66.d242c458.js"><link rel="prefetch" href="/assets/js/67.09408170.js"><link rel="prefetch" href="/assets/js/68.4a0d3a9d.js"><link rel="prefetch" href="/assets/js/69.3cb10f09.js"><link rel="prefetch" href="/assets/js/7.9ccbcacf.js"><link rel="prefetch" href="/assets/js/70.4a1cebf6.js"><link rel="prefetch" href="/assets/js/8.2205d2c1.js"><link rel="prefetch" href="/assets/js/9.7067ed95.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.62a8c583.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f2335d27.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en_US/" class="home-link router-link-active"><img src="/v2ray.png" alt="V2Fly.org" class="logo"> <span class="site-name can-hide">V2Fly.org</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en_US/guide/start.html" class="nav-link">
  Quick Start
</a></div><div class="nav-item"><a href="/en_US/config/overview.html" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en_US/awesome/tools.html" class="nav-link">
  Tools
</a></div><div class="nav-item"><a href="/en_US/developer/intro/compile.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Developer Guide
</a></div><div class="nav-item"><a href="https://guide.v2fly.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  New concise guide
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/developer/intro/compile.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en_US/developer/intro/compile.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/v2fly" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en_US/guide/start.html" class="nav-link">
  Quick Start
</a></div><div class="nav-item"><a href="/en_US/config/overview.html" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en_US/awesome/tools.html" class="nav-link">
  Tools
</a></div><div class="nav-item"><a href="/en_US/developer/intro/compile.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Developer Guide
</a></div><div class="nav-item"><a href="https://guide.v2fly.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  New concise guide
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/developer/intro/compile.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en_US/developer/intro/compile.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/v2fly" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Developer Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/developer/intro/compile.html" aria-current="page" class="active sidebar-link">The first step: learn to compile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en_US/developer/intro/compile.html#windows" class="sidebar-link">Windows</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/intro/compile.html#pre-work" class="sidebar-link">Pre-work</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/intro/compile.html#pull-v2ray-source-code" class="sidebar-link">Pull V2Ray source code</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/intro/compile.html#manual-construction" class="sidebar-link">Manual construction</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/intro/compile.html#script-build" class="sidebar-link">Script build</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/intro/compile.html#automatic-build" class="sidebar-link">Automatic build</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/intro/compile.html#install-the-completed-installation-package" class="sidebar-link">Install the completed installation package</a></li></ul></li><li><a href="/en_US/developer/intro/design.html" class="sidebar-link">Step 2: Understand the architecture</a></li><li><a href="/en_US/developer/intro/guide.html" class="sidebar-link">Step 3: Start development</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Protocol Details</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="the-first-step-learn-to-compile"><a href="#the-first-step-learn-to-compile" class="header-anchor">#</a> The first step: learn to compile</h1> <h2 id="windows"><a href="#windows" class="header-anchor">#</a> Windows</h2> <p>If you are using Windows, just refer to this article: <a href="https://github.com/v2ray/discussion/issues/756" target="_blank" rel="noopener noreferrer">[Tutorial] Detailed methods for manual compilation and cross-compilation of V2Ray under Windows<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="pre-work"><a href="#pre-work" class="header-anchor">#</a> Pre-work</h2> <p>V2Ray uses <a href="https://golang.org/" target="_blank" rel="noopener noreferrer">Golang<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> as the main programming language. <a href="https://bazel.build/" target="_blank" rel="noopener noreferrer">Bazel<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used as the build tool in the team release process. It is recommended to use macOS or Linux for development. A small amount of scripts may not run properly on Windows.</p> <ul><li>Install Golang: <a href="https://golang.org/doc/install" target="_blank" rel="noopener noreferrer">golang.org/doc/install<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Install Bazel: <a href="https://docs.bazel.build/versions/master/install.html" target="_blank" rel="noopener noreferrer">docs.bazel.build/install<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (No need for manual/script compilation)</li></ul> <h2 id="pull-v2ray-source-code"><a href="#pull-v2ray-source-code" class="header-anchor">#</a> Pull V2Ray source code</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>go get -u -v v2ray.com/core/<span class="token punctuation">..</span>.
</code></pre></div><p>Note that this command cannot be completed normally if Google’s network environment cannot be accessed normally. In case of situation, you need to configure a local HTTP proxy server first, and configure local environment variables, such as</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span>http://localhost:1080
<span class="token builtin class-name">export</span> <span class="token assign-left variable">https_proxy</span><span class="token operator">=</span>http://localhost:1080
</code></pre></div><p>go will use the local HTTP proxy on port 1080 to pull the source code.</p> <h2 id="manual-construction"><a href="#manual-construction" class="header-anchor">#</a> Manual construction</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPATH<span class="token variable">)</span></span>/src/v2ray.com/core/main
<span class="token function">env</span> <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> go build -o <span class="token environment constant">$HOME</span>/v2ray -ldflags <span class="token string">&quot;-s -w&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPATH<span class="token variable">)</span></span>/src/v2ray.com/core/infra/control/main
<span class="token function">env</span> <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> go build -o <span class="token environment constant">$HOME</span>/v2ctl -tags confonly -ldflags <span class="token string">&quot;-s -w&quot;</span>
</code></pre></div><p>The above command generates the newly-built <code>v2ray</code> and <code>v2ctl</code> executable files in the current user's <code>$HOME</code> directory, and it can be used normally.</p> <p>The process of building other CPU architectures and other systems (Windows/macOS) belongs to the cross-compilation process of golang. It mainly controls the two variables of <code>GOOS</code> / <code>GOARCH</code>. Please refer to the relevant golang documents, and I will not repeat them here.</p> <h2 id="script-build"><a href="#script-build" class="header-anchor">#</a> Script build</h2> <p>The above manual construction is only the v2ray executable program itself, the distribution package zip also contains other files such as the address library. The release package can be easily produced by using the packaging script.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">wget</span> https://raw.githubusercontent.com/v2ray/v2ray-core/master/release/user-package.sh
<span class="token function">chmod</span> <span class="token number">755</span> user-package.sh
./user-package.sh
</code></pre></div><p>Execute the above script directly to generate a file similar to <code>v2ray-custom-linux-amd64-20190710-000000.zip</code> in the current directory, which is the release package.</p> <p>You can use some personalized parameters to customize the release package:</p> <ul><li><code>windows</code> build a release package for the Windows version</li> <li><code>darwin</code> build the release package of darwin (macOS) version</li> <li><code>tgz</code> is packaged as <code>tar.gz</code></li> <li><code>386</code> is built as a 32-bit program</li> <li><code>arm</code> builds release for ARM architecture CPU，arm arm64</li> <li><code>mips</code> Same as above, please refer to the cross-compilation document of golang</li> <li><code>nodat</code> does not include domain name/IP database <code>geoip.dat</code> and <code>geosite.dat</code>, which can reduce the size of the release package</li> <li><code>noconf</code> does not contain example json, systemd/systemv and other configuration files</li> <li><code>nosource</code> Don't execute <code>go get ...</code> to avoid overwriting the v2ray source code that has been pulled locally</li></ul> <p>The above parameters have no order requirements, only need to be passed to the script as needed. Take building a distribution package suitable for Windows 32-bit without address library and sample configuration as an example:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./user-package.sh windows <span class="token number">386</span> nodat noconf
</code></pre></div><p>For v2ray compiled by the script, its startup information will become the time when the user was compiled to distinguish:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>V2Ray <span class="token number">4.20</span>.0 <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token number">20190710</span>-010000
A unified platform <span class="token keyword">for</span> anti-censorship.
</code></pre></div><p>Users can also modify the information in the script and customize their own version.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">CODENAME</span><span class="token operator">=</span><span class="token string">&quot;user&quot;</span>
<span class="token assign-left variable">BUILDNAME</span><span class="token operator">=</span><span class="token variable">$NOW</span>
</code></pre></div><h2 id="automatic-build"><a href="#automatic-build" class="header-anchor">#</a> Automatic build</h2> <p>The bazel build tool is mainly used by the release team.</p> <p>If you only need to build an installation package for a specific platform, such as Linux / AMD64:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPATH<span class="token variable">)</span></span>/src/v2ray.com/core
bazel build --action_env<span class="token operator">=</span><span class="token environment constant">PATH</span><span class="token operator">=</span><span class="token environment constant">$PATH</span> --action_env<span class="token operator">=</span>SPWD<span class="token operator">=</span><span class="token environment constant">$PWD</span> --action_env<span class="token operator">=</span>GOPATH<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPATH<span class="token variable">)</span></span> --action_env<span class="token operator">=</span>GOCACHE<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOCACHE<span class="token variable">)</span></span> --spawn_strategy <span class="token builtin class-name">local</span> //release: v2ray_linux_amd64_package
<span class="token comment">#Output: bazel-bin/release/v2ray-linux-64.zip</span>
</code></pre></div><p>Build all installation packages:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPATH<span class="token variable">)</span></span>/src/v2ray.com/core
bazel build --action_env<span class="token operator">=</span><span class="token environment constant">PATH</span><span class="token operator">=</span><span class="token environment constant">$PATH</span> --action_env<span class="token operator">=</span>SPWD<span class="token operator">=</span><span class="token environment constant">$PWD</span> --action_env<span class="token operator">=</span>GOPATH<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOPATH<span class="token variable">)</span></span> --action_env<span class="token operator">=</span>GOCACHE<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>go <span class="token function">env</span> GOCACHE<span class="token variable">)</span></span> --spawn_strategy <span class="token builtin class-name">local</span> //release: all
</code></pre></div><h2 id="install-the-completed-installation-package"><a href="#install-the-completed-installation-package" class="header-anchor">#</a> Install the completed installation package</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$GOPATH</span>/src/v2ray.com/core/release/install-release.sh --local <span class="token operator">&lt;</span>path/to/zip/file<span class="token operator">&gt;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/v2fly/v2fly-github-io/edit/master/docs/en_US/developer/intro/compile.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/3/2020, 11:27:37 PM</span></div></footer> <div class="contributors" style="display:none;" data-v-ae751c7e><span data-v-ae751c7e>Contributors</span> </div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/en_US/developer/intro/design.html">
        Step 2: Understand the architecture
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.f124a845.js" defer></script><script src="/assets/js/3.1f5d93f1.js" defer></script><script src="/assets/js/6.3810ea31.js" defer></script><script src="/assets/js/57.3916c424.js" defer></script>
  </body>
</html>
